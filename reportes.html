<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes - Ash-Ling ERP</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="logo/logo.png" alt="Ash-Ling Logo" class="logo">
                <h2 class="company-name">Ash-Ling</h2>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="dashboard.html" class="menu-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="ventas.html" class="menu-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Ventas</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="clientes.html" class="menu-link">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="inventario.html" class="menu-link">
                    <i class="fas fa-boxes"></i>
                    <span>Inventario</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="facturacion.html" class="menu-link">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>Facturación</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="finanzas.html" class="menu-link">
                    <i class="fas fa-chart-pie"></i>
                    <span>Finanzas</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="empleados.html" class="menu-link">
                    <i class="fas fa-user-tie"></i>
                    <span>Empleados</span>
                </a>
            </li>
            <li class="menu-item active">
                <a href="reportes.html" class="menu-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reportes</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="configuracion.html" class="menu-link">
                    <i class="fas fa-cog"></i>
                    <span>Configuración</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="page-title">Reportes</h1>
            </div>
            <div class="header-right">
                <div class="search-container">
                    <input type="text" placeholder="Buscar reportes..." class="search-input" id="searchInput">
                    <i class="fas fa-search search-icon"></i>
                </div>
                <div class="notifications">
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                </div>
                <div class="user-menu">
                    <button class="user-btn">
                        <img src="https://via.placeholder.com/40" alt="Usuario" class="user-avatar">
                        <span class="user-name">Admin</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Content -->
        <div class="content-container">
            <!-- Report Categories -->
            <div class="report-categories">
                <div class="category-tabs">
                    <button class="tab-btn active" data-category="all">
                        <i class="fas fa-chart-line"></i>
                        Todos los Reportes
                    </button>
                    <button class="tab-btn" data-category="sales">
                        <i class="fas fa-shopping-cart"></i>
                        Ventas
                    </button>
                    <button class="tab-btn" data-category="financial">
                        <i class="fas fa-dollar-sign"></i>
                        Financieros
                    </button>
                    <button class="tab-btn" data-category="inventory">
                        <i class="fas fa-boxes"></i>
                        Inventario
                    </button>
                    <button class="tab-btn" data-category="customers">
                        <i class="fas fa-users"></i>
                        Clientes
                    </button>
                    <button class="tab-btn" data-category="hr">
                        <i class="fas fa-user-tie"></i>
                        Recursos Humanos
                    </button>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="actions-panel">
                <div class="section-header">
                    <h2>Generador de Reportes</h2>
                    <div class="actions-group">
                        <button class="btn btn-secondary" id="scheduleReportBtn">
                            <i class="fas fa-clock"></i>
                            Programar Reporte
                        </button>
                        <button class="btn btn-primary" id="customReportBtn">
                            <i class="fas fa-plus"></i>
                            Reporte Personalizado
                        </button>
                    </div>
                </div>

                <!-- Date Range Selector -->
                <div class="date-range-selector">
                    <div class="quick-ranges">
                        <button class="range-btn active" data-range="today">Hoy</button>
                        <button class="range-btn" data-range="week">Esta Semana</button>
                        <button class="range-btn" data-range="month">Este Mes</button>
                        <button class="range-btn" data-range="quarter">Trimestre</button>
                        <button class="range-btn" data-range="year">Este Año</button>
                        <button class="range-btn" data-range="custom">Personalizado</button>
                    </div>
                    <div class="custom-range" id="customRange" style="display: none;">
                        <input type="date" id="startDate" class="form-input">
                        <span>hasta</span>
                        <input type="date" id="endDate" class="form-input">
                        <button class="btn btn-outline" id="applyRange">Aplicar</button>
                    </div>
                </div>
            </div>

            <!-- Reports Grid -->
            <div class="reports-grid" id="reportsGrid">
                <!-- Sales Reports -->
                <div class="report-card" data-category="sales">
                    <div class="report-header">
                        <div class="report-icon sales">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="report-info">
                            <h3>Reporte de Ventas</h3>
                            <p>Análisis detallado de ventas por período</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('sales')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('sales')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <div class="report-card" data-category="sales">
                    <div class="report-header">
                        <div class="report-icon sales">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="report-info">
                            <h3>Ventas por Producto</h3>
                            <p>Rendimiento individual de productos</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('product-sales')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('product-sales')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <!-- Financial Reports -->
                <div class="report-card" data-category="financial">
                    <div class="report-header">
                        <div class="report-icon financial">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="report-info">
                            <h3>Estado de Resultados</h3>
                            <p>Ingresos, gastos y rentabilidad</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('profit-loss')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('profit-loss')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <div class="report-card" data-category="financial">
                    <div class="report-header">
                        <div class="report-icon financial">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="report-info">
                            <h3>Flujo de Caja</h3>
                            <p>Movimientos de efectivo detallados</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('cash-flow')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('cash-flow')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <!-- Inventory Reports -->
                <div class="report-card" data-category="inventory">
                    <div class="report-header">
                        <div class="report-icon inventory">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="report-info">
                            <h3>Estado de Inventario</h3>
                            <p>Stock actual y valorización</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('inventory-status')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('inventory-status')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <div class="report-card" data-category="inventory">
                    <div class="report-header">
                        <div class="report-icon inventory">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="report-info">
                            <h3>Productos con Stock Bajo</h3>
                            <p>Alertas de reabastecimiento</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('low-stock')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('low-stock')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <!-- Customer Reports -->
                <div class="report-card" data-category="customers">
                    <div class="report-header">
                        <div class="report-icon customers">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="report-info">
                            <h3>Análisis de Clientes</h3>
                            <p>Segmentación y comportamiento</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('customer-analysis')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('customer-analysis')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <div class="report-card" data-category="customers">
                    <div class="report-header">
                        <div class="report-icon customers">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="report-info">
                            <h3>Top Clientes</h3>
                            <p>Clientes más valiosos</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('top-customers')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('top-customers')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <!-- HR Reports -->
                <div class="report-card" data-category="hr">
                    <div class="report-header">
                        <div class="report-icon hr">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="report-info">
                            <h3>Reporte de Nómina</h3>
                            <p>Salarios y beneficios por período</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('payroll')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('payroll')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>

                <div class="report-card" data-category="hr">
                    <div class="report-header">
                        <div class="report-icon hr">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="report-info">
                            <h3>Asistencia y Vacaciones</h3>
                            <p>Control de tiempo y ausencias</p>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn btn-outline" onclick="generateReport('attendance')">
                            <i class="fas fa-eye"></i>
                            Ver
                        </button>
                        <button class="btn btn-primary" onclick="downloadReport('attendance')">
                            <i class="fas fa-download"></i>
                            Descargar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recent Reports -->
            <div class="recent-reports">
                <div class="section-header">
                    <h3>Reportes Recientes</h3>
                    <button class="btn btn-outline" id="clearHistoryBtn">
                        <i class="fas fa-trash"></i>
                        Limpiar Historial
                    </button>
                </div>
                <div class="recent-reports-list" id="recentReportsList">
                    <!-- Dynamic content -->
                </div>
            </div>
        </div>
    </main>

    <!-- Report Preview Modal -->
    <div class="modal large" id="reportModal">
        <div class="modal-content report-modal">
            <div class="modal-header">
                <h3 id="reportModalTitle">Vista Previa del Reporte</h3>
                <div class="modal-actions">
                    <button class="btn btn-outline" id="printReportBtn">
                        <i class="fas fa-print"></i>
                        Imprimir
                    </button>
                    <button class="btn btn-primary" id="downloadReportBtn">
                        <i class="fas fa-download"></i>
                        Descargar
                    </button>
                    <button class="modal-close" id="closeReportModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body" id="reportContent">
                <!-- Dynamic report content -->
            </div>
        </div>
    </div>

    <!-- Custom Report Modal -->
    <div class="modal" id="customReportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Crear Reporte Personalizado</h3>
                <button class="modal-close" id="closeCustomModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="customReportForm">
                    <div class="form-group">
                        <label for="reportName">Nombre del Reporte</label>
                        <input type="text" id="reportName" name="reportName" required>
                    </div>
                    <div class="form-group">
                        <label for="reportType">Tipo de Reporte</label>
                        <select id="reportType" name="reportType" required>
                            <option value="">Seleccionar tipo...</option>
                            <option value="sales">Ventas</option>
                            <option value="financial">Financiero</option>
                            <option value="inventory">Inventario</option>
                            <option value="customers">Clientes</option>
                            <option value="hr">Recursos Humanos</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customStartDate">Fecha Inicio</label>
                            <input type="date" id="customStartDate" name="startDate" required>
                        </div>
                        <div class="form-group">
                            <label for="customEndDate">Fecha Fin</label>
                            <input type="date" id="customEndDate" name="endDate" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Campos a Incluir</label>
                        <div class="checkbox-group" id="reportFields">
                            <!-- Dynamic checkboxes based on report type -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reportFormat">Formato de Salida</label>
                        <select id="reportFormat" name="format" required>
                            <option value="pdf">PDF</option>
                            <option value="excel">Excel</option>
                            <option value="csv">CSV</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" id="cancelCustomBtn">Cancelar</button>
                <button type="button" class="btn btn-primary" id="generateCustomBtn">
                    <i class="fas fa-magic"></i>
                    Generar Reporte
                </button>
            </div>
        </div>
    </div>

    <script src="js/data-manager.js"></script>
    <script src="js/reportes.js"></script>
</body>
</html>
